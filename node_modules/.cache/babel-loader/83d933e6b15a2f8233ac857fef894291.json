{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\wchri\\\\Web\\\\CastoryCases\\\\src\\\\Components\\\\PhoneCanvas.js\";\nimport React from 'react';\nimport LoadingPhone from './LoadingPhone';\nimport \"./styles/PhoneCanvas.css\";\nimport { blobToBase64 } from './../util';\n\nclass PhoneCanvas extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      widgets: [],\n      loaded: false\n    };\n    this.canvas = React.createRef();\n  }\n\n  render() {\n    var _this$props$width, _this$props$height, _this$props$width2, _this$props$height2;\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      width: (_this$props$width = this.props.width) !== null && _this$props$width !== void 0 ? _this$props$width : 700,\n      height: (_this$props$height = this.props.height) !== null && _this$props$height !== void 0 ? _this$props$height : 700,\n      className: \"phone-canvas_Container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"canvas\", {\n      ref: this.canvas,\n      className: \"phone-canvas\",\n      width: (_this$props$width2 = this.props.width) !== null && _this$props$width2 !== void 0 ? _this$props$width2 : 700,\n      height: (_this$props$height2 = this.props.height) !== null && _this$props$height2 !== void 0 ? _this$props$height2 : 700,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 17\n      }\n    }), !this.state.loaded && /*#__PURE__*/React.createElement(LoadingPhone, {\n      className: \"loadingPhone\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 40\n      }\n    }));\n  }\n\n  async componentDidMount() {\n    this.canvasContext = this.canvas.current.getContext('2d');\n    this.canvasContext.moveTo(Math.floor(this.canvas.current.width / 2), Math.floor(this.canvas.current.height / 2));\n    this.paint();\n    let img;\n    await fetch(this.props.mask).then(response => response.blob()).then(images => img = images);\n    await blobToBase64(img).then(data => {\n      this.mask = new Image();\n\n      this.mask.onload = () => {\n        this.mask.position = [-this.mask.width / 2, -this.mask.height / 2];\n        this.paint();\n      };\n\n      this.mask.src = data;\n    });\n    console.log(this.mask);\n    await fetch(this.props.case).then(response => response.blob()).then(images => img = images);\n    await blobToBase64(img).then(data => {\n      this.case = new Image();\n\n      this.case.onload = () => {\n        this.case.position = [-this.case.width / 2, -this.case.height / 2];\n        this.paint();\n      };\n\n      this.case.src = data;\n    });\n    this.paint();\n    this.setState({\n      loaded: true\n    });\n  }\n\n  paint() {\n    if (this.canvasContext) {\n      this.canvasContext.fillStyle = 'rgb(160, 160, 160)';\n      this.canvasContext.fillRect(0, 0, this.canvas.current.width, this.canvas.current.width);\n      this.mask && this.canvasContext.drawImage(this.mask, this.mask.position[0], this.mask.position[1]);\n      this.case && this.canvasContext.drawImage(this.case, this.mask.position[0], this.mask.position[1]);\n    }\n  }\n\n}\n\nexport default PhoneCanvas;","map":{"version":3,"sources":["C:/Users/wchri/Web/CastoryCases/src/Components/PhoneCanvas.js"],"names":["React","LoadingPhone","blobToBase64","PhoneCanvas","Component","constructor","props","state","widgets","loaded","canvas","createRef","render","width","height","componentDidMount","canvasContext","current","getContext","moveTo","Math","floor","paint","img","fetch","mask","then","response","blob","images","data","Image","onload","position","src","console","log","case","setState","fillStyle","fillRect","drawImage"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport LoadingPhone from './LoadingPhone';\r\nimport \"./styles/PhoneCanvas.css\"\r\nimport { blobToBase64 } from './../util';\r\nclass PhoneCanvas extends React.Component{\r\n\r\n    constructor(props)\r\n    {\r\n        super(props)\r\n        this.state = {\r\n            widgets: [],\r\n            loaded: false\r\n        }\r\n        this.canvas = React.createRef();\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div width={this.props.width ?? 700} height={this.props.height ?? 700} className=\"phone-canvas_Container\">\r\n                <canvas ref={this.canvas} className=\"phone-canvas\" width={this.props.width ?? 700} height={this.props.height ?? 700}>\r\n                </canvas>\r\n                {!this.state.loaded && <LoadingPhone className=\"loadingPhone\"></LoadingPhone>}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    async componentDidMount(){\r\n        this.canvasContext = this.canvas.current.getContext('2d')\r\n        this.canvasContext.moveTo(Math.floor(this.canvas.current.width / 2), Math.floor(this.canvas.current.height / 2))\r\n        this.paint();\r\n        let img;\r\n        await fetch(this.props.mask)\r\n        .then(response => response.blob())\r\n        .then(images => img = images)\r\n        await blobToBase64(img).then(data => {\r\n            this.mask = new Image(); \r\n            this.mask.onload = () => {\r\n                this.mask.position = [-this.mask.width / 2, -this.mask.height / 2]\r\n                this.paint();\r\n            }\r\n            this.mask.src = data;\r\n        })\r\n        console.log(this.mask)\r\n        await fetch(this.props.case)\r\n        .then(response => response.blob())\r\n        .then(images => img = images)\r\n        await blobToBase64(img).then(data => {\r\n            this.case = new Image(); \r\n            this.case.onload = ()=>{\r\n                this.case.position = [-this.case.width / 2, -this.case.height / 2]\r\n                this.paint(); \r\n            }\r\n            this.case.src = data;\r\n        })\r\n        this.paint()\r\n        this.setState({loaded:true})\r\n    }\r\n\r\n    paint(){\r\n        if(this.canvasContext){\r\n            this.canvasContext.fillStyle = 'rgb(160, 160, 160)';\r\n            this.canvasContext.fillRect(0, 0, this.canvas.current.width, this.canvas.current.width);\r\n            this.mask && this.canvasContext.drawImage(this.mask,this.mask.position[0],this.mask.position[1]);\r\n            this.case && this.canvasContext.drawImage(this.case,this.mask.position[0],this.mask.position[1]);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default PhoneCanvas;"]},"metadata":{},"sourceType":"module"}
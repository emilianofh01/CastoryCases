{"ast":null,"code":"var _jsxFileName = \"/Users/emilianofernandez/Documents/ReactJS/castorycasesjs/src/Components/SearchResults.js\";\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport './styles/SearchBar.css';\nimport loading from '../media/images/loading.gif';\nimport './styles/SearchResults.css';\nconst API = \"https://us-central1-castory-cases.cloudfunctions.net\";\nconst PATH = '/quicksearch';\nvar startTimeMS = 0; // EPOCH Time of event count started\n\nvar timerId = 0; // Current timer handler\n\nvar timerStep = 1000; // Time beetwen calls\n\nvar timeTaken = 0;\n\nclass SearchResults extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.buscar = async () => {\n      this.setState({\n        loading: true\n      });\n      await this.startTimer();\n\n      if (this.props.busqueda !== \"\") {\n        if (timeTaken <= 1000) {\n          await fetch(API + PATH + \"/\".concat(this.props.busqueda)).then(response => response.json()).then(data => this.setState({\n            productos: data,\n            busqueda: this.props.busqueda,\n            loading: false,\n            count: this.state.count + 1\n          }));\n          clearTimeout(this.startTimer());\n        }\n      }\n    };\n\n    this.eventRaised = () => {\n      timeTaken = this.getRemainingTime();\n      console.log(timeTaken);\n      clearTimeout(timerId); // clear timer\n    };\n\n    this.limitar = () => {\n      const limitado = [];\n    };\n\n    this.getRemainingTime = () => new Date().getTime() - startTimeMS;\n\n    this.state = {\n      busqueda: \"\",\n      productos: [],\n      count: 0,\n      loading: true\n    };\n  }\n\n  componentWillReceiveProps() {\n    this.buscar();\n  }\n\n  startTimer() {\n    startTimeMS = new Date().getTime();\n    timerId = setTimeout(this.eventRaised, timerStep);\n  }\n\n  render() {\n    // console.log(this.props.busqueda)\n    const removeAccents = str => str.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\");\n\n    const productos = this.state.productos;\n    const busqueda = this.props.busqueda;\n    const lowerCasedFilter = removeAccents(busqueda.toLowerCase());\n    const DatosFiltrados = productos.filter(producto => removeAccents(producto.productName.toLowerCase()).includes(lowerCasedFilter)).splice(0, 3);\n    return React.createElement(\"ul\", {\n      className: this.props.busqueda ? \"SearchComponent__results-container show\" : \"SearchComponent__results-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: \"results\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"Resultados\"), DatosFiltrados.length && this.props.busqueda !== \" \" ? DatosFiltrados.map(producto => React.createElement(\"li\", {\n      key: producto.id,\n      className: \"item_result\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(Link, {\n      onClick: this.props.reset,\n      className: \"linkProduct\",\n      to: \"/cases/\".concat(producto.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"itemImage\",\n      src: producto.productImages,\n      alt: \"CasePhoto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"item_title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, producto.productName, \" - \", producto.productModel), React.createElement(\"p\", {\n      className: \"item_brand\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"Marca: \", producto.productBrand, \" \")), React.createElement(\"p\", {\n      className: \"item_price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"$\", producto.productPrice, \" MXN\")))) : this.state.loading ? React.createElement(\"img\", {\n      className: \"loading\",\n      src: loading,\n      alt: \"Loading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }) : React.createElement(\"p\", {\n      className: \"NoResult\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"No se ha encontrado resultados resultados para tu busqueda \", React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"(\", this.props.busqueda, \")\")), lowerCasedFilter.length < DatosFiltrados.length && this.state.loading === false && DatosFiltrados.length > 0 ? React.createElement(Link, {\n      to: \"/search?=\".concat(this.props.busqueda),\n      className: \"moreButton\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, \"Ver mas\") : \"\");\n  }\n\n}\n\nexport default SearchResults;","map":{"version":3,"sources":["/Users/emilianofernandez/Documents/ReactJS/castorycasesjs/src/Components/SearchResults.js"],"names":["React","Link","loading","API","PATH","startTimeMS","timerId","timerStep","timeTaken","SearchResults","Component","constructor","props","buscar","setState","startTimer","busqueda","fetch","then","response","json","data","productos","count","state","clearTimeout","eventRaised","getRemainingTime","console","log","limitar","limitado","Date","getTime","componentWillReceiveProps","setTimeout","render","removeAccents","str","normalize","replace","lowerCasedFilter","toLowerCase","DatosFiltrados","filter","producto","productName","includes","splice","length","map","id","reset","productImages","productModel","productBrand","productPrice"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {Link} from 'react-router-dom'\nimport './styles/SearchBar.css'\nimport loading from '../media/images/loading.gif'\nimport './styles/SearchResults.css'\n\nconst API = \"https://us-central1-castory-cases.cloudfunctions.net\"\nconst PATH = '/quicksearch'\nvar startTimeMS = 0;  // EPOCH Time of event count started\nvar timerId = 0;          // Current timer handler\nvar timerStep=1000;   // Time beetwen calls\nvar timeTaken = 0;\n\n\nclass SearchResults extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            busqueda: \"\",\n            productos: [],\n            count: 0,\n            loading: true\n        }\n    }\n\n    buscar = async () => {\n        this.setState({loading: true})\n        await this.startTimer()\n        if(this.props.busqueda !== \"\") {\n            if(timeTaken <= 1000) {\n                await fetch(API + PATH + `/${this.props.busqueda}`)\n                .then(response => response.json())\n                .then(data => this.setState({productos: data,busqueda: this.props.busqueda, loading: false, count: this.state.count + 1}));\n                clearTimeout(this.startTimer())\n            } \n        }\n           \n    }\n\n    \n    \n    componentWillReceiveProps() {\n        this.buscar()\n        \n    }\n\n    eventRaised = () => {\n        \n        timeTaken = this.getRemainingTime()\n        console.log(timeTaken)\n        \n        clearTimeout(timerId) // clear timer\n        \n    }\n\n    startTimer() {\n        startTimeMS = (new Date()).getTime();\n        timerId = setTimeout(this.eventRaised,timerStep);\n    }\n\n    limitar = () => {\n        const limitado = [];\n    }\n\n    getRemainingTime = () => ((new Date()).getTime() - startTimeMS );    \n\n    render() {\n        // console.log(this.props.busqueda)\n        const removeAccents = str => str.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\");\n        const {productos} = this.state\n        const {busqueda} = this.props\n        const lowerCasedFilter = removeAccents(busqueda.toLowerCase());\n        const DatosFiltrados = productos.filter(producto => removeAccents(producto.productName.toLowerCase()).includes(lowerCasedFilter)).splice(0,3)\n        \n        return(\n            <ul className={this.props.busqueda ? \"SearchComponent__results-container show\": \"SearchComponent__results-container\"}>\n                <h3 className=\"results\">Resultados</h3>\n\n                {DatosFiltrados.length && this.props.busqueda !== \" \" ?  DatosFiltrados.map((producto) =>(\n                    \n                <li key={producto.id} className=\"item_result\">\n                    <Link onClick={this.props.reset} className=\"linkProduct\" to={`/cases/${producto.id}`}>\n                        <img className=\"itemImage\" src={producto.productImages} alt=\"CasePhoto\"/>\n                        <div>\n                            <p className=\"item_title\">{producto.productName} - {producto.productModel}</p>\n                            <p className=\"item_brand\">Marca: {producto.productBrand} </p>\n                        </div>\n                        <p className=\"item_price\">${producto.productPrice} MXN</p>\n                        </Link>\n                        </li>\n                        )): this.state.loading ? <img className=\"loading\" src={loading} alt=\"Loading\"/>\n                            : <p className=\"NoResult\">No se ha encontrado resultados resultados para tu busqueda <b>({this.props.busqueda})</b></p>}\n                        \n                        {lowerCasedFilter.length < DatosFiltrados.length \n                            && this.state.loading === false \n                                && DatosFiltrados.length > 0 ? <Link to={`/search?=${this.props.busqueda}`} className=\"moreButton\">Ver mas</Link> \n                                    : \"\"}\n            </ul>\n        )\n    }\n}\n\nexport default SearchResults"]},"metadata":{},"sourceType":"module"}